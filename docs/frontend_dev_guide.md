# モックデータを用いたフロントエンド開発ガイド

このドキュメントでは、`doc_ai_helper_backend`の充実したモックデータを利用したフロントエンド開発の方法について説明します。

## 概要

フロントエンド開発のために、バックエンドは複数のMarkdownファイルとリポジトリ構造を持つモックデータを提供します。これらのデータは主に以下の機能のテストに使用できます：

1. ドキュメントレンダリング
2. リンク解決と変換
3. フロントマターの解析と表示
4. 検索機能
5. リポジトリ構造のナビゲーション

## 利用可能なモックデータ

### リポジトリ

現在、以下のモックリポジトリが利用可能です：

1. `octocat/Hello-World` - 基本的なサンプルリポジトリ
2. `example/docs-project` - 複雑なドキュメントプロジェクト（リンク、フロントマター、コードブロックなど）

### ドキュメントタイプ

以下のドキュメントタイプがテスト可能です：

1. フロントマター付きMarkdown
2. 相互リンクを含むMarkdown
3. コードブロックを含むMarkdown
4. 画像参照を含むMarkdown
5. 複雑な構造（テーブル、リスト、引用など）を持つMarkdown

## API エンドポイント

### ドキュメント取得

```
GET /api/v1/documents/contents/{service}/{owner}/{repo}/{path}?ref={ref}&transform_links={true|false}
```

例：
```
GET /api/v1/documents/contents/mock/example/docs-project/index.md?ref=main&transform_links=true
```

### リポジトリ構造取得

```
GET /api/v1/repositories/structure/{service}/{owner}/{repo}?ref={ref}&path={path}
```

例：
```
GET /api/v1/repositories/structure/mock/example/docs-project?ref=main
```

### 検索

```
GET /api/v1/search/{service}/{owner}/{repo}?query={query}&limit={limit}
```

例：
```
GET /api/v1/search/mock/example/docs-project?query=api&limit=10
```

## フロントエンド開発のユースケース

### 1. ドキュメントナビゲーション

`example/docs-project`リポジトリには、相互リンクされた複数のMarkdownファイルが含まれています。このリポジトリを使用して、以下の機能をテストできます：

- ドキュメント間のナビゲーション
- ディレクトリ構造に基づいたサイドバーの構築
- パンくずリストの実装

### 2. リンク解決

モックデータには様々なタイプのリンクが含まれています：

- 同一ディレクトリ内のドキュメントへのリンク
- 親ディレクトリのドキュメントへのリンク
- 子ディレクトリのドキュメントへのリンク
- 画像へのリンク
- 外部リンク
- セクションへのアンカーリンク

これらを使用してリンク解決とナビゲーションロジックをテストできます。

### 3. フロントマター処理

多くのドキュメントにはフロントマターが含まれており、これを使用して以下の機能をテストできます：

- タイトルの抽出と表示
- メタデータ（著者、日付、タグなど）の表示
- カスタムメタデータの処理

### 4. 検索機能

検索APIを使用して、検索結果の表示とハイライト処理をテストできます。

### 5. コードブロックのシンタックスハイライト

様々な言語のコードブロックを含むドキュメントを使用して、シンタックスハイライト機能をテストできます。

## テスト方法

以下のステップでモックデータをテストできます：

1. バックエンドサーバーを起動する
2. APIエンドポイントにアクセスする
3. レスポンスを確認する

テスト用スクリプト `tests/scripts/test_mock_data.py` を実行することで、モックデータの基本機能を確認できます：

```bash
python -m tests.scripts.test_mock_data
```

## フロントエンド実装のヒント

1. **ドキュメントレンダリング**
   - Markdownレンダリングには `marked` や `react-markdown` などのライブラリを使用する
   - コードブロックには `prism.js` や `highlight.js` でシンタックスハイライトを適用する

2. **ナビゲーション**
   - リポジトリ構造APIを使用してサイドバーナビゲーションを構築する
   - パンくずリストには現在のパスに基づいた階層を表示する

3. **リンク処理**
   - リンク情報はドキュメントレスポンスの `links` フィールドから取得できる
   - 相対パスを適切に解決してリンクを構築する
   - 画像リンクには適切なプレビューを提供する

4. **検索機能**
   - 検索結果にはハイライト情報が含まれており、強調表示に使用できる
   - スコアに基づいて結果を並べ替える

5. **メタデータ表示**
   - フロントマターから抽出したメタデータを使用してドキュメントヘッダーを構築する
   - タグなどを使用してカテゴリナビゲーションを実装する

## 今後の拡張予定

1. **Quartoドキュメントのサポート**
   - Quartoプロジェクト設定の解析
   - ソースと出力ファイルの関連付け

2. **より複雑なリポジトリ構造**
   - マルチブランチのサポート
   - タグやリリースのサポート

3. **ユーザー設定とカスタマイズ**
   - テーマ設定
   - 表示オプション
